# üí≥ –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫**: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–ê–¥–º–∏–Ω—ã**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### 2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (http://localhost:3000)
- **Dashboard**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **Users**: —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- **Transactions**: –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—Ö–æ–¥**: JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### 3. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**: 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **1 –º–µ—Å—è—Ü**: $9.99 - –±–µ–∑–ª–∏–º–∏—Ç
- **3 –º–µ—Å—è—Ü–∞**: $24.99 - –±–µ–∑–ª–∏–º–∏—Ç (—Å–∫–∏–¥–∫–∞ 17%)
- **1 –≥–æ–¥**: $79.99 - –±–µ–∑–ª–∏–º–∏—Ç (—Å–∫–∏–¥–∫–∞ 33%)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
- `/help` - –ü–æ–º–æ—â—å
- `/profile` - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–¥–ø–∏—Å–∫—É
- `/buy` - –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

**–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏:**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/buy` –±–æ—Ç—É
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
3. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–ª—è –æ–ø–ª–∞—Ç—ã
4. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

**–î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/admin/login
2. –í–æ–π–¥–∏—Ç–µ:
   - Username: `admin`
   - Password: `admin123`
3. **‚ö†Ô∏è –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!**

**–§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**

–ß–µ—Ä–µ–∑ Node.js –∫–æ–Ω—Å–æ–ª—å:
```javascript
const { userDB } = require('./database');

// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ 30 –¥–Ω–µ–π
userDB.addSubscription(USER_ID, 'premium', 30);

// –î–æ–±–∞–≤–∏—Ç—å 10 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
userDB.addFreeChecks(USER_ID, 10);
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Users"
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ "Add Checks"
4. –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### –¢–∞–±–ª–∏—Ü–∞ `users`:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `username` - Username
- `subscription_type` - –¢–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏ (free/premium)
- `subscription_expires` - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- `checks_remaining` - –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- `total_checks` - –í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–¥–µ–ª–∞–Ω–æ

### –¢–∞–±–ª–∏—Ü–∞ `transactions`:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `amount` - –°—É–º–º–∞
- `subscription_type` - –¢–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏
- `status` - –°—Ç–∞—Ç—É—Å (pending/completed/failed)

### –¢–∞–±–ª–∏—Ü–∞ `checks_history`:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `file_name` - –ò–º—è —Ñ–∞–π–ª–∞
- `file_size` - –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- `status` - –°—Ç–∞—Ç—É—Å (success/failed)

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Telegram Stars (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
```javascript
// –í bot.js –¥–æ–±–∞–≤–∏—Ç—å:
bot.on('pre_checkout_query', (query) => {
    bot.answerPreCheckoutQuery(query.id, true);
});

bot.on('successful_payment', (msg) => {
    const userId = msg.from.id;
    const payload = msg.successful_payment.invoice_payload;
    
    // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
    if (payload === '1month') {
        userDB.addSubscription(userId, 'premium', 30);
    }
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Stripe
```bash
npm install stripe
```

```javascript
const stripe = require('stripe')('your_stripe_secret_key');

// –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
const session = await stripe.checkout.sessions.create({
    payment_method_types: ['card'],
    line_items: [{
        price_data: {
            currency: 'usd',
            product_data: { name: '1 Month Subscription' },
            unit_amount: 999, // $9.99
        },
        quantity: 1,
    }],
    mode: 'payment',
    success_url: 'https://yourbot.com/success',
    cancel_url: 'https://yourbot.com/cancel',
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞
```bash
npm install @coinbase/coinbase-sdk
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

1. **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
2. **–î–æ–±–∞–≤—å—Ç–µ JWT_SECRET** –≤ .env:
   ```
   JWT_SECRET=your-very-long-random-secret-key-here
   ```
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `bot.db`

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫

## üõ† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (TODO):

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Stripe/PayPal
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
- [ ] –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ —Å–∫–∏–¥–∫–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ Excel
- [ ] Webhook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.
